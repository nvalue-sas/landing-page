---
import DesktopMenu from "./DesktopMenu.astro";
import MobileMenu from "./MobileMenu.astro";
import ThemeToggle from "./ThemeToggle.astro";
import CTAButton from "./CTAButton.astro";
import Logo from "./Logo.astro";
import { navItems } from "./navItems";
---

<header
  id="navbar"
  class="fixed top-0 right-0 left-0 z-50 mt-4 transition-all duration-300 dark:bg-transparent"
>
  <div class="relative mx-6 md:container md:mx-auto">
    <div
      id="navbar-container"
      class="relative rounded-3xl border border-gray-200/40 bg-white/5 px-6 py-2 backdrop-blur supports-backdrop-blur:bg-white/60 md:rounded-3xl md:px-8 dark:border-gray-700/30"
    >
      <nav class="flex items-center justify-between">
        <!-- Logo -->
        <Logo />

        <!-- Desktop Menu -->
        <DesktopMenu />

        <!-- Mobile Menu Button -->
        <MobileMenu />

        <!-- Desktop Theme Toggle (hidden on mobile) -->
        <div class="hidden md:block">
          <ThemeToggle />
        </div>
      </nav>
    </div>

    <!-- Mobile Navigation Dropdown (fuera del container principal) -->
    <div
      id="mobile-menu"
      class="absolute top-[calc(100%+2px)] right-0 left-0 hidden rounded-b-3xl border border-t-0 border-gray-200/40 bg-white/10 pt-2 pb-4 backdrop-blur supports-backdrop-blur:bg-white/70 md:hidden dark:border-gray-700/30 dark:bg-white/5 dark:supports-backdrop-blur:bg-white/60"
    >
      {
        navItems.map((item) => (
          <a
            href={item.href}
            class="mobile-menu-link block px-6 py-3 text-base font-medium text-gray-900 hover:bg-gray-100/50 dark:text-gray-50 dark:hover:bg-gray-700/50"
          >
            {item.name}
          </a>
        ))
      }
      <div
        class="mt-2 flex items-center justify-between gap-4 border-t border-gray-200/50 px-6 pt-4 dark:border-gray-700/50"
      >
        <!-- Theme Toggle -->
        <ThemeToggle />
        <CTAButton variant="mobile" />
      </div>
    </div>
  </div>
</header>
